---
title: "Suspense와  React Loading Skeleton 이용하여 사용자 경험 향상시키기"
date: "2025-10-25"
slug: "20251025"
tag: "NextJs"
category: "Frontend"
description: "유명한 웹사이트들을 보면 사용자 경험을 최적화 시키기위해 스켈레톤 UI는 필수로 있습니다."
---

유명한 웹사이트들을 보면 사용자 경험을 최적화 시키기위해 스켈레톤 UI는 필수로 있습니다.

스켈레톤 UI 가 있으면 나 지금 웹사이트를 보여줄 준비 중이니 조금만 기다려줘. 라는 의미로도 보여지기 때문에 사용자 경험을 향상 시킬 수 있어요.

아직 스켈레톤 UI 를 적용하기전 제 블로그 입니다. 마치 사이트가 멈춘것만 같고, 어떤 컨텐츠가 어디 위치에 있는지도 모르겠고 자칫 버그가 생겨서 사이트가 안나온것처럼 느껴지게 됩니다.  
이는 사용자 경험에 매우 좋지않은 경험을 주게되므로 개선이 필요한데요, 스켈레톤 UI를 적용하고자 할때에 꼭 알아야 할 컴포넌트가 바로 `Suspense` 입니다.

# 1. Suspense

`<Suspense>`는 React의 네이티브 컴포넌트 입니다.  
쉽게 말해서 **"데이터 기다리는 부분이 있으니, 로딩될 때까진 임시로 다른 UI 보여줄게"** 라고 해주는 역할입니다.

기존에는 로딩 상태를 수동으로 관리하고 렌더링했었지만, `Suspense`는 그걸 자동으로 해준다고 생각하시면 됩니다. 즉, 데이터가 준비되면 알아서 실제 콘텐츠로 보여주는 역할입니다.

이를 통해 적용하고자 하는 스켈레톤 UI와 아주 잘 어울리는 컴포넌트임을 알 수 있습니다.

<aside data-type="info">

원칙적으로, Suspense는 **실제로 비동기 작업이 필요한 부분만** 감싸야 합니다.

</aside>

## 모든 것을 Suspense로 감싸지는 마세요!

예를들어,

```tsx
<Suspense fallback={<Skeleton />}>
  <Header />
</Suspense>

<Suspense fallback={<Skeleton />}>
  <Sidebar />
</Suspense>

<Suspense fallback={<Skeleton />}>
  <MainContent />
</Suspense>

<Suspense fallback={<Skeleton />}>
  <Footer />
</Suspense>
```
![Suspense Bad Example](/img/posts/20251025/bad-example.gif)

이렇게 모든 컨텐츠에 Suspense 를 이용하게 되면 스켈레톤 UI를 사용하는 곳이 너무 많아져 어떤것이 데이터를 받아오는지, 우선순위가 무엇인지 헷갈리게 됩니다.

```tsx
<Header />

<Suspense fallback={<MainSkeleton />}>
	<Sidebar />
  <MainContent />
</Suspense>

<Footer />
```
![Suspense Good Example](/img/posts/20251025/good-example.gif)

이처럼 데이터 로딩 등을 통해 비동기 작업이 필요한 부분에만 감싸게 된다면 어떤것이 데이터를 받아오는지에 대해 파악하기 쉽고 정적인 페이지는 먼저 보여주기에 사용자 경험을 해치지 않습니다.

<aside data-type="note">

**Next.js**에서는 중첩 Suspense도 **병렬 스트리밍**으로 처리됩니다.

</aside>

```tsx
<Suspense fallback={<ContentSkeleton />}>
  <Header /> {/* 0.5초 */}
  <Suspense fallback={<ContentSkeleton />}>
    <Sidebar /> {/* 1.5초 */}
  </Suspense>
  <Suspense fallback={<ContentSkeleton />}>
    <MainContent /> {/* 2.0초 */}
  </Suspense>
  <Footer /> {/* 0.8초 */}
</Suspense>
```

일반 React에서는 **가장 바깥 Suspense**가 안쪽 Suspense들을 포함하기 때문에, 가장 느린 async가 끝날 때까지 전체 fallback만 보여야 합니다.

즉, `<Header />`, `<Footer />`도 `MainContent`가 끝날 때까지 안 보여야 합니다.

그런데 Next.js에서는 **React Server Components (RSC)** 와 **Streaming SSR 로 인해 다르게 동작합니다.**
<aside>
서버에서 렌더링  

├─ Suspense(전체)  
│   ├─ Header (0.5s)  
│   ├─ Suspense(Sidebar)  
│   ├─ Suspense(MainContent)  
│   └─ Footer (0.8s)
</aside>
Next.js는 서버에서 각 `Suspense`블록을 병렬로 처리합니다. 그 후 완료된 블록부터 순서대로 HTML 스트리밍으로 클라이언트에 전송합니다.

쉽게 말해, `Header` 가 0.5초만에 끝나면 바로 전송, `Footer` 는 0.8초만에 바로 전송, `Sidebar, MainContent` 는 `fallback` 표시 후에 교체 되게 됩니다.  
중첩된 `Suspense` 를 사용해도 Next.js 는 각각 독립된 스트리밍 청크로 취급하여 UX 적으로 중요도 순서로 렌더링 하는걸로 보이게 됩니다.

<aside data-type="note">

그렇더라도 제가 보여드린 예시는 예시일뿐, 실제로 저렇게 쓰는 경우는 드뭅니다. 😅

</aside>

예를들어, 모든 컨텐츠들이 동시에 보여주게 하고 싶다면, 해당 컨텐츠들의 위치에 맞게 스켈레톤 UI를 꾸미고

```tsx
<Suspense fallback={<ContentSkeleton />}>
  <Header />
  <Sidebar />
  <MainContent />
  <Footer />
</Suspense>
```

이런식으로 작성하게 되면 모든 데이터 로딩이 끝났을때에 짠 하고 보여집니다.

하지만 데이터로드가 끝나는 컴포넌트 먼저 보여주고싶다면 별도의 Suspense 경계 를 두는것을 권장드려요.

# 2. React-loading-skeleton 적용하기

![스켈레톤 UI 적용 전](/img/posts/20251025/before_skeleton-ui.gif)
<em>(스켈레톤 UI 적용 전)</em>

자 다시 돌아와서, 저는 이 `Suspense` 에 fallback 으로 보여 줄 부분을 단순 로딩이 아닌 스켈레톤 UI를 활용하고자 합니다.

제 블로그는 Next15 기반으로 Tailwind CSS 를 사용하기에 가장 유명한 `React Loading Skeleton` 라이브러리를 이용하려고 합니다.

정적으로 직접 만드는 방법도 있으나, 가볍고 빠른 라이브러리로 자동으로 스타일 적용 및 애니메이션까지 첨부되어 있고 타입스크립트 지원 까지 해주기에 해당 라이브러리를 사용을 하겠습니다.

### 설치

```tsx
npm install react-loading-skeleton
```

혹은

```tsx
yarn add react-loading-skeleton
```

### 적용하기

사용 방법은 간단합니다!

```tsx
import 'react-loading-skeleton/dist/skeleton.css'
```

스타일을 최상단 레이아웃에 `import` 를 해줍니다. 저는 `tailwind` 의 `globals` 와 함께 `import` 해두었어요.

```tsx
import Skeleton from "react-loading-skeleton";

const CategorySkeleton = () => {
  return (
    <div className="flex flex-col gap-2">
      {Array.from({ length: 3 }).map((_, i) => (
        <Skeleton key={i} width="100%" height={20} borderRadius={4} />
      ))}
    </div>
  );
};

export default CategorySkeleton;
```

간단하게, `Skeleton` 의 스타일만 지정해주면 돼요.

<aside data-type ="warning">

**주의하세요!**

Flex 레이아웃에서 너비가 0이 될 수 있습니다!  
intrinsic width 가 없기에 flex 컨테이너에서 0이 됩니다.  
이때는 `<Skeleton containerClassName="flex-1" />` 이런식으로 작성해주시면 돼요.

</aside>

원형 스켈레톤 뿐만 아니라, 애니메이션을 끄고 키고 할 수 있는 기능, 그리고 `SkeletonTheme` 를 통해 다크모드 대응도 손쉽게 가능합니다.

---
![스켈레톤 UI 적용 후](/img/posts/20251025/example.gif)

간단하게 스켈레톤 UI 만 적용해보려고 했었는데, 어쩌다보니 `Suspense` 까지 내용을 살펴보았네요.

사실 그동안 제가 썼던 `Suspense` 는 한 페이지의 로딩창 만을 보여주기 위함이였기에 자세히 알아 볼 생각은 안해봤는데, 다양한 경험을 쌓아야 지식도 그만큼 늘어나는것 같아요.

나중에는 조금 시간을 쓰더라도 React 및 Next 의 공식문서를 한번 완독해보려고 합니다.

일단 블로그에 제가 원하는 기능 먼저 추가하고나서요, 곧 추가가 다 되면 리팩토링 한번 하고 … 문서를 읽으면서 정리하여 포스팅하는 시간을 갖는게 좋겠네요.

아, 최근에는 관심이 생긴 기술이 하나 있어서 12월 중순까지 그 부분에 좀 더 집중 할 계획입니다. 프로젝트가 마무리되면 회고록과 함께 들고올려고 합니다.

---

https://react.dev/reference/react/Suspense

https://www.npmjs.com/package/react-loading-skeleton