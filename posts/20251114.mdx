---
title: "투자 자동화를 위한 첫 걸음, EA 연결 부터 해봐요 (Mac환경)"
date: "2025-11-14"
slug: "20251114"
tag: "Gpters19기AI스터디,AI"
category: "AI"
description: "지피터스 AI스터디 19기 - 미니사례 첫번째 글 feat.투자 자동화"
---

> 해당 글은 지피터스 AI스터디 19기 를 진행하면서 [제가 작성한 미니사례글](https://www.gpters.org/wealth/post/first-step-automating-investments-su6oAUsFaSXi9oa)과 동일한 글 입니다.

# 🌱 AI 투자, 어떻게 시작할까?  
요즘 들어 투자 얘기, 진짜 자주 보이더라고요.  
예전엔 그냥 흘려들었는데, 어느 순간부터 “나도 돈 좀 모아야겠다!” 싶은 마음이 생기더라고요.

근데 막상 시작하려니까…  
공부할 건 왜 이렇게 많고, 용어는 왜 이렇게 어렵죠? 🥹  
그러다 용기 내서 시작해봤는데… 파란불(📉)만 실컷 봤다는 슬픈 현실…  

그래서 생각했어요.  
“요즘 그렇게 잘 나간다는 AI, 투자엔 어떻게 활용되고 있지?”

겁도 좀 나서 진짜 돈 말고, 데모 계좌부터 깔아봤습니다!  

## 🔍 한국에도 AI 투자, 이미 시작됐다고?
찾아보니까 벌써

- 한국투자증권
- 대신증권
- 미래에셋증권
- 삼성증권

이런 큰 증권사들에서도 AI 기술을 투자에 적극 활용하고 있더라고요.  
그러면 AI는 대체 어떻게 투자 결정을 할까?

어디에 투자하느냐가 진짜 중요!  
투자 성공의 3대 공식이라고 불리는 게 있는데요,

> **시장 크기 × 전략 × 타이밍**

AI도 이 공식을 따라가요.  
특히 ‘어떤 시장’에 들어가는지가 거의 90%의 승부를 좌우한다고 하더라고요.

## AI 자동투자에 잘 맞는 시장은?  
**AI의 장점은 바로 시간에 구애받지 않고 ‘자동’으로 투자할 수 있다는 점!**

근데 중요한 건, 어떤 시장이 AI에 최적화되어 있느냐는 거죠.

### 📉 주식시장?  
장 열리는 시간이 한정적이고
뉴스에 따라 급격히 출렁이기도 하고  
AI가 일일이 다 대응하기 어려움…

### 💰 코인 시장?  
매일 24시간 열려있는 건 장점인데  
너무 자주, 너무 크게 움직여서  
AI가 학습하기엔 불확실성이 너무 큼…

### 💡 그래서 결론은?  
거래 빈도수가 많고  
가격 변동성이 적절하며  
**예측 가능성이 있는 시장!**

> 🟢 외환시장이 AI 자동투자에는 가장 최적화되어 있다고 느꼈어요!

- 하루 환율이 극단적으로 요동치지 않음
- 데이터가 많아서 패턴 학습 가능
- 시간과 에너지를 아끼며 자동화 가능!

그래서 제 목표는?  
> **"매수부터 매도까지, 풀 자동화까지 달려가보자!"**

단순히 돈을 벌자! 가 아니라 **“예측 가능한 안정적인 시장”**에서  
내가 직접 세팅하고 AI가 대신 움직이는 시스템을 만드는 게 목표예요.

--- 

# 👉 첫 걸음, EA(Expert Advisor) 로 자동 매매 연결하기!
## EA (Expert Advisor)란?
자동투자 하려면 결국 누가 매수/매도 버튼을 눌러줘야 하잖아요?  
그 역할을 대신해주는 똑똑한 프로그램이 바로 EA예요!

### "어디서 쓰는 건데?" 싶을 수 있는데요,  
MetaTrader 4/5 플랫폼에서 작동하는 자동 거래 프로그램이에요.

MQL4 / MQL5 언어로 작성되고, 한 번 세팅만 하면 24시간 자동 거래가 돌아갑니다.

### 어떤 방식으로 돌아가나요?
말 그대로 **Plug & Play**  
→ 설치하고 설정만 해두면, 알아서 매수/매도 수행!

조건만 맞춰두면,  
→ 내가 자고 있어도, 회의 중이어도 알아서 거래해줘요!

## 🤖 AI + EA = 진짜 자동화의 시작!
제가 직접 거래를 해보니 이걸 내가 다 분석하고 눌렀으면 진작 지쳤겠다 싶은 순간이 많았어요.

EA는 단순한 반복 매매가 아니라, AI 분석 결과나 전략을 실제로 실행해주는 손발 역할이에요.

즉, AI가 "언제 매수/매도하자" 전략을 세우면 EA가 "오케이, 실행해줄게!" 하며 실제 거래를 진행해주는 거죠.

## 이제 연결을 해볼까요?  
> 저는 MacOS 환경에서 클로드 코드와 함께 진행하며, MT4 기준으로 진행하였습니다!

```
거래 플랫폼 : MetaTrader4
계좌 유형 : RAW ECN
계좌 통화 : USD
레버리지 선택 : 500:1
계정 잔액 : 25000, 10000, 5000 (총 3번 개설)
```

저는 Vantage + MT4 로 진행하기 때문에, 해당 정보와 같이 데모 계좌를 개설하였어요.  
여기까지 잘 진행을 했다면, 이메일에서 해당 정보들을 확인 할 수 있습니다!

```
MT4 Login ID
MT4 Password
MT4 Server
```

### MetaTrader 4 (MT4) 실행
eurusd.h4 차트를 켜요  
→ 여기서 h4는 4시간 봉이란 뜻이에요!  
→ 하루의 흐름을 보기 좋아서 이걸 많이 씁니다.

### 데모 계좌 로그인
저희가 만든 MT4용 데모계좌에 로그인을 해보아야죠!

![MT4-login](/img/posts/20251114/login.png)

탐색기 → 계좌 우클릭 → 거래계좌 로그인 혹은 상단 메뉴바의 파일 → 거래계좌 로그인 을 누르면 다음과 같은 창이 뜹니다.

이때 서버는 꼭 **VantageInternational-Demo** 여야해요!

윈도우 환경같은 경우에는 서버가 바로 VantageInternational-Demo 가 나오지만, 맥 환경에서는 나오지 않더라구요. 🥲  
이에 대한 해결방법도 같이 가져왔습니다!!

### Mac 환경에서 VantageInternational-Demo 찾기

<img src="/img/posts/20251114/mac-find-vantage.png" alt="MT4-find-server" width="300" />

다시 상단바 에서 파일로 들어가준후 계좌 신청을 클릭해줍니다.

![MT4-find-server](/img/posts/20251114/mac-server.png)

그리고 거래 서버 에 직접 Vantage 를 입력해주면 스캔이 되면서

<img src="/img/posts/20251114/login-find-vantage.png" alt="MT4-find-server" width="450" />

Mac 환경에서도 데모계좌 전용 서버를 선택하게 될 수 있어요! 👏👏👏👏

그리고, 이제 클로드에게 mq4 파일을 만들어달라고 요청을 할건데요,  
제가 사용한 프롬프트는 다음과 같습니다.

```
# 역할

당신은 30년 경력의 퀀트 트레이더입니다. Ray Dalio의 "All Weather Portfolio" 철학과 Jim Simons의 통계적 차익거래 전략을 결합한 전문가입니다.

# 맥락

외환(FX) 시장에서 작동하는 MT4/MT5용 EA(Expert Advisor)를 MQL4/MQL5로 작성해야 합니다. 이 EA는 초보자도 백테스트하고 실전에 적용할 수 있도록 명확한 주석과 리스크 관리가 포함되어야 합니다.

# 목표

변동성이 낮은 외환 시장에서 안정적으로 작동하는 자동매매 EA를 만들어주세요. 레버리지 10배 이하, 손절 2%, 익절 5% 기준으로 설정하되, 사용자가 쉽게 수정 가능하도록 파라미터화해주세요. 전체코드 포함 .mq4 파일을 생성해주세요.

# 전략 (다음 중 하나 선택)

[골든크로스 전략] MA(5)와 MA(20) 골든크로스 시 매수, 데드크로스 시 매도

[RSI 역추세 전략] RSI 30 이하 매수, 70 이상 매도, 50 돌파 시 청산

[볼린저밴드 돌파 전략] 하단 밴드 터치 시 매수, 상단 밴드 터치 시 매도

[브레이크아웃 전략] 20일 고점 돌파 시 매수, 20일 저점 돌파 시 매도

# 필수 요구사항

- 모든 코드에 한글 주석 상세 작성
- 레버리지 대신 로트 사이즈 0.01로 시작
- 백테스트 가능하도록 OrderSend() 함수 포함
- 통화쌍: EURUSD 기준 (사용자가 변경 가능하도록)
저는 골든크로스 전략 을 채택했습니다. 이렇게 하면 mq4 파일이 만들어져요!
```

그 후에 MT4 로 다시 돌아가서 도구 → 언어편집기 (F4) 를 누르면 에디터 창이 나옵니다!
F7 또는 컴파일 버튼 클릭 하면 ex4 파일이 생성 되어요.

### 👉 하단에 에러 메시지 뜨면?
Ctrl + C로 복사해서 클로드 코드에게 이 에러가 나왔어. 수정해줘~ 라고 말한 후 컴파일 해줍시다.  
컴파일 성공하면 .ex4 파일이 자동 생성돼요.

### 🐈‍⬛ EA 파일 넣기
메뉴에서: 파일 → 데이터 폴더 열기  

경로: MQL4 → Experts

여기에 방금 만든 .ex4 파일을 붙여넣기!

그 다음 MT4를 재시작하거나, 탐색기에서 "새로고침" 하면  
왼쪽 EA 목록에 내가 만든 EA가 나타나요. 🎉

### EA 활성화 설정
**✔️ 시스템 트레이딩 허용하기:**  
상단 메뉴에서  
도구 → 옵션 → Expert Advisors 탭  
→ “자동 거래 허용” 체크!  
→ "라이브 거래 허용" 등도 함께 체크해주는 게 좋아요.  

**✔️ 차트에 EA 드래그해서 붙이기**  
→ 팝업 설정창이 뜨면 ‘자동 거래 허용’ 확인!

![MT4-chart](/img/posts/20251114/chart.png)

### 💡 여기까지 하면?
- 차트 위에 EA가 붙고  
- 오른쪽 상단에 웃는 얼굴 😃 이 뜨면 성공입니다!!  
(😐 얼굴이면 뭔가 설정이 빠졌다는 뜻!)

## EA 연결까지 마치면서..
윈도우 환경에서 처음 연결을 하긴 했지만, 제가 주로 사용하는건 맥이라서 다시 맥으로 재셋팅 하려고 하니까 서버가 안보이더라구요.

완전 패닉 상태에 MT5로 확 사용해버릴까..? 하다가 다시 이것저것 눌러보았는데,  
생각보다 해결 방법은 간단했습니다.. 😳

사실 패닉 상태일때 스터디장님께 MT4는 왜 사용하는걸까요 흑흑 MT5 사용하면 안되나요~ 했었는데,

> MT4가 역사가 더 길어서 기존 20년 이상 트레이딩 개발자들이 많이 사용하고 있습니다. 검증기간을 거친 완성된 전략이 있으니 기존 MT4를 유지하는 경향이 있구요. 저희 기업형 프로그램 또한 MT4에서 동작하는 버전이 안정적이고 수익률이 높아서 그걸로 사용하고 있어요.

라고 친절한 답변까지.. ✨ MT5로도 테스트하기에 크게 다르지않다고 덧붙여 말씀 주셨지만, 그래도 스터디장님과 같은걸 사용하고 싶은 제 마음이 있었어요.

EA 연결에 있어서 맥 환경에서도 연결을 하느라 시간이 좀 걸렸지만, 그래도 뿌듯한 첫 번째 단계 였습니다.

이렇게 데모 계좌로 먼저 테스트 하면서 투자 공부를 하다보면 저도 빨간 불만 들어오는 제 거래창 들을 볼 수 있겠지요? 😁

--- 
도움 받은 글
https://www.gpters.org/wealth/post/smart-investment-method-ai-F1tzOzvnLrUSiF8

